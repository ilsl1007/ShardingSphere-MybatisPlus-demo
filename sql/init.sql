-- 创建三个库
CREATE DATABASE `ds` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
CREATE DATABASE `ds0` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
CREATE DATABASE `ds1` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;

-- ds 库执行以下 DDL
DROP TABLE IF EXISTS `sys_dept`;
CREATE TABLE `sys_dept`
(
    `id`              varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '主键',
    `dept_no`         varchar(18) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '部门编号(规则：父级关系编码+自己的编码)',
    `name`            varchar(300) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '部门名称',
    `pid`             varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '父级id',
    `status`          tinyint(4) NULL DEFAULT NULL COMMENT '状态(1:正常；0:弃用)',
    `relation_code`   varchar(3000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '为了维护更深层级关系',
    `dept_manager_id` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '部门经理user_id',
    `manager_name`    varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '部门经理名称',
    `phone`           varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '部门经理联系电话',
    `create_time`     datetime(0) NULL DEFAULT NULL COMMENT '创建时间',
    `update_time`     datetime(0) NULL DEFAULT NULL COMMENT '更新时间',
    `deleted`         tinyint(4) NULL DEFAULT NULL COMMENT '是否删除(1未删除；0已删除)',
    PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '系统部门' ROW_FORMAT = Dynamic;

-- ds0 与 ds1 库分别执行以下 DDL
DROP TABLE IF EXISTS `tab_user0`;
CREATE TABLE `tab_user0`
(
    `id`          bigint(32) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
    `name`        varchar(64) DEFAULT NULL COMMENT '姓名',
    `sex`         varchar(32) DEFAULT NULL COMMENT '性别',
    `age`         int(11) DEFAULT NULL COMMENT '年龄',
    `create_time` datetime    DEFAULT NULL COMMENT '创建时间',
    `update_time` datetime    DEFAULT NULL COMMENT '更新时间',
    `deleted`     tinyint(1) DEFAULT NULL COMMENT '是否删除 1删除 0未删除',
    PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
DROP TABLE IF EXISTS `tab_user1`;
CREATE TABLE `tab_user1`
(
    `id`          bigint(32) unsigned NOT NULL AUTO_INCREMENT COMMENT '主键',
    `name`        varchar(64) DEFAULT NULL COMMENT '姓名',
    `sex`         varchar(32) DEFAULT NULL COMMENT '性别',
    `age`         int(11) DEFAULT NULL COMMENT '年龄',
    `create_time` datetime    DEFAULT NULL COMMENT '创建时间',
    `update_time` datetime    DEFAULT NULL COMMENT '更新时间',
    `deleted`     tinyint(1) DEFAULT NULL COMMENT '是否删除 1删除 0未删除',
    PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;